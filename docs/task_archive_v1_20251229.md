# AIè¦‹ç©ã‚‚ã‚Šã‚·ã‚¹ãƒ†ãƒ  - ã‚¿ã‚¹ã‚¯ç®¡ç†ï¼ˆã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ï¼‰

> [!CAUTION]
> **ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯éå»ï¼ˆV1ãƒ•ã‚§ãƒ¼ã‚ºï¼‰ã®å±¥æ­´ã§ã™ã€‚**
> æœ€æ–°ã®ã‚¿ã‚¹ã‚¯é€²æ—ã¯ [task.md](file:///Users/hongoujun/Documents/GitHub/flow/docs/task.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

**æœ€çµ‚æ›´æ–°**: 2025-12-29 23:10

---

## ğŸ‰ å®Œäº†æ¸ˆã¿

### Phase 1: Backend APIï¼ˆå®Œäº†ï¼‰
- âœ… Azure Functions ã§ calc API å®Ÿè£…
- âœ… ãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸ
- âœ… ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: `https://estimate-api-cli.azurewebsites.net/api`

### Phase 2: AI Agentï¼ˆå®Œäº†ï¼‰
- âœ… Prompt Flow å®Ÿè£…
- âœ… call_calc ãƒ„ãƒ¼ãƒ«å®Ÿè£…
- âœ… lookup_knowledge ãƒ„ãƒ¼ãƒ«å®Ÿè£…ï¼ˆAzure AI Searchï¼‰
- âœ… generate_response å®Ÿè£…ï¼ˆAzure OpenAI gpt-4oï¼‰
- âœ… **Azure Container Apps ã«ãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸ**
  - URL: `https://estimation-agent-app.blueplant-e852c27d.eastus2.azurecontainerapps.io`
  - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯: `/health` âœ…
  - ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°: `/score`

### Phase 3: Frontend UIï¼ˆå®Œäº†ï¼‰
- âœ… 8pxã‚°ãƒªãƒƒãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
- âœ… é–‹ç™ºè¦‹ç©ã‚‚ã‚Šãƒ•ã‚©ãƒ¼ãƒ 
- âœ… ãƒ‡ã‚¶ã‚¤ãƒ³ç›¸è«‡ãƒ•ã‚©ãƒ¼ãƒ 
- âœ… ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
- âœ… GitHubã«ãƒ—ãƒƒã‚·ãƒ¥æ¸ˆã¿

### ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ•ã‚§ãƒ¼ã‚ºæ”¯æ´æ©Ÿèƒ½ï¼ˆå®Œäº†ï¼‰
- âœ… 5ã¤ã®æ–°ã—ã„RAGãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
  - `19_wireframe_process.md`
  - `20_design_company_collaboration.md`
  - `21_figma_design_specs.md`
  - `22_design_to_dev_handoff.md`
  - `23_design_phase_checklist.md`

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆå®Œäº†ï¼‰
- âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ³å ±å‘Šæ›¸ï¼ˆå¤–å‘ã‘ç°¡æ˜“ç‰ˆï¼‰
- âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ³å ±å‘Šæ›¸ï¼ˆå†…å‘ã‘è©³ç´°ç‰ˆï¼‰
- âœ… æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰
- âœ… RAGå‰Šé™¤ã‚¬ã‚¤ãƒ‰

---

## ğŸ”„ æ¬¡å›ã‚„ã‚‹ã“ã¨

### 1. ~~Frontend UI ã® API æ¥ç¶š~~ï¼ˆå®Œäº† âœ…ï¼‰

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: å®Œäº†ï¼ˆ2025-12-29ï¼‰

**å®Ÿæ–½å†…å®¹**:
- `app.js` ã® `API_ENDPOINT` ã‚’ Container Apps URL ã«æ›´æ–°
- ä¸è¦ãª `API_KEY` ã¨ Authorization ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’å‰Šé™¤
- Container Apps ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šï¼ˆAzure OpenAIã€AI Searchï¼‰
- E2Eãƒ†ã‚¹ãƒˆå®Œäº†

### 2. ~~E2Eãƒ†ã‚¹ãƒˆ~~ï¼ˆå®Œäº† âœ…ï¼‰

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: å®Œäº†ï¼ˆ2025-12-29ï¼‰

**çµæœ**:
- âœ… APIç›´æ¥ãƒ†ã‚¹ãƒˆæˆåŠŸ
- âœ… ãƒ–ãƒ©ã‚¦ã‚¶E2Eãƒ†ã‚¹ãƒˆæˆåŠŸ
- âœ… AI Agentæ­£å¸¸å‹•ä½œç¢ºèª
- è¦‹ç©ã‚‚ã‚Šä¾‹: 1,848,000 JPYï¼ˆ6ãƒ¶æœˆã€3åã€Webã‚¢ãƒ—ãƒªï¼‰

### 3. RAGãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆå„ªå…ˆåº¦: ä¸­ï¼‰

**æ–¹æ³•**: Azure AI Foundry ã® UI ã‹ã‚‰æ‰‹å‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

**ãƒ•ã‚¡ã‚¤ãƒ«**:
- `estimation_agent/rags/19_wireframe_process.md`
- `estimation_agent/rags/20_design_company_collaboration.md`
- `estimation_agent/rags/21_figma_design_specs.md`
- `estimation_agent/rags/22_design_to_dev_handoff.md`
- `estimation_agent/rags/23_design_phase_checklist.md`

**æ‰‹é †**:
1. Azure Portal â†’ Azure AI Search â†’ `estimation-rags` ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
2. å„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰‹å‹•ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
3. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å†æ§‹ç¯‰

### 4. Frontend UI ã®ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆå„ªå…ˆåº¦: ä½ï¼‰

**æ–¹æ³•**: Azure Static Web Apps

**æ‰‹é †**:
1. GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä½œæˆ
2. `estimation-ui-app` ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤
3. ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

---

## ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆï¼ˆç¾åœ¨ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ãƒ¦ãƒ¼ã‚¶ãƒ¼                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Frontend UI (ãƒ­ãƒ¼ã‚«ãƒ«)                          â”‚
â”‚  - 8pxã‚°ãƒªãƒƒãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³                                        â”‚
â”‚  - é–‹ç™ºè¦‹ç©ã‚‚ã‚Š + ãƒ‡ã‚¶ã‚¤ãƒ³ç›¸è«‡                                â”‚
â”‚  - http://localhost:8000                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP POST /score
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         AI Agent (Azure Container Apps) âœ…                   â”‚
â”‚  - Flask ã‚¢ãƒ—ãƒª                                              â”‚
â”‚  - https://estimation-agent-app.blueplant-e852c27d...       â”‚
â”‚  - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯: /health                                   â”‚
â”‚  - ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°: /score                                      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                        â”‚                      â”‚
     â”‚ call_calc              â”‚ lookup_knowledge     â”‚ generate_response
     â–¼                        â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend API  â”‚    â”‚ Azure AI Search  â”‚    â”‚ Azure OpenAI     â”‚
â”‚ (Functions)  â”‚    â”‚ (RAG)            â”‚    â”‚ (gpt-4o)         â”‚
â”‚ âœ…           â”‚    â”‚ âœ…               â”‚    â”‚ âœ…               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› æ—¢çŸ¥ã®å•é¡Œ

### 1. Azure ML Prompt Flow ãƒ‡ãƒ—ãƒ­ã‚¤å¤±æ•—
- **å•é¡Œ**: Liveness probe ã‚¨ãƒ©ãƒ¼ã§ç¹°ã‚Šè¿”ã—å¤±æ•—
- **è§£æ±ºç­–**: Azure Container Apps ã«åˆ‡ã‚Šæ›¿ãˆ âœ…
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: è§£æ±ºæ¸ˆã¿

### 2. RAGãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæœªã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- **å•é¡Œ**: æ–°ã—ã„5ã¤ã®RAGãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒ Azure AI Search ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ãªã„
- **å½±éŸ¿**: ãƒ‡ã‚¶ã‚¤ãƒ³ç›¸è«‡æ©Ÿèƒ½ãŒå®Œå…¨ã«ã¯å‹•ä½œã—ãªã„å¯èƒ½æ€§
- **å„ªå…ˆåº¦**: ä¸­
- **æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: æ‰‹å‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

---

## ğŸ’° ã‚³ã‚¹ãƒˆè©¦ç®—

### ç¾åœ¨ã®æ§‹æˆï¼ˆæœˆé¡ï¼‰

| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” | æœˆé¡ã‚³ã‚¹ãƒˆï¼ˆç›®å®‰ï¼‰ |
|---------|------|-------------------|
| Azure OpenAI (gpt-4o) | AIå¿œç­”ç”Ÿæˆ | Â¥0 - Â¥5,000 |
| Azure AI Search (Basic) | RAG | Â¥10,000 |
| Azure Functions (Consumption) | Backend API | Â¥0 - Â¥500 |
| Azure Container Apps (Consumption) | AI Agent | Â¥0 - Â¥2,000 |
| Azure Container Registry (Basic) | Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ | Â¥600 |
| **åˆè¨ˆ** | | **Â¥10,600 - Â¥18,100** |

### ã‚³ã‚¹ãƒˆæœ€é©åŒ–æ¡ˆ

PoCãƒ¬ãƒ“ãƒ¥ãƒ¼å¾Œã€Azure AI Search ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã§æœˆé¡ **Â¥600 - Â¥7,500** ã«å‰Šæ¸›å¯èƒ½ã€‚

---

## ğŸ“ ãƒ¡ãƒ¢

### ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•ã®å¤‰æ›´
- **å½“åˆ**: Azure ML Prompt Flow â†’ Online Endpoint
- **æœ€çµ‚**: Flask ãƒ©ãƒƒãƒ‘ãƒ¼ â†’ Docker â†’ Azure Container Apps
- **ç†ç”±**: Liveness probe ã®å•é¡Œã‚’å›é¿

### å­¦ã‚“ã ã“ã¨
1. Azure ML ã® Prompt Flow ãƒ‡ãƒ—ãƒ­ã‚¤ã¯ã€probe è¨­å®šãŒè¤‡é›‘
2. Container Apps ã¯æŸ”è»Ÿã§ã€é€šå¸¸ã® Web ã‚¢ãƒ—ãƒªã¨ã—ã¦æ‰±ãˆã‚‹
3. `az acr build` ã§ãƒ­ãƒ¼ã‚«ãƒ« Docker ä¸è¦ã§ãƒ“ãƒ«ãƒ‰å¯èƒ½

---

## ğŸ”— é‡è¦ãªãƒªãƒ³ã‚¯

- **AI Agent**: https://estimation-agent-app.blueplant-e852c27d.eastus2.azurecontainerapps.io
- **Backend API**: https://estimate-api-cli.azurewebsites.net/api
- **GitHub (flow)**: https://github.com/junhongo-ccs/flow
- **GitHub (estimation-ui-app)**: https://github.com/junhongo-ccs/estimation-ui-app
- **GitHub (estimate-backend-calc)**: https://github.com/junhongo-ccs/estimate-backend-calc

---

**æ¬¡å›ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚**: RAGãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆé …ç›®3ï¼‰ã‹ã‚‰é–‹å§‹
